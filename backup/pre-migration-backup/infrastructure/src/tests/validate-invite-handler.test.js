"use strict";
/**
 * Unit Tests for Validate Invite Handler
 * Feature: trinity-voting-fixes
 *
 * Tests the web landing page invite validation API endpoint
 */
Object.defineProperty(exports, "__esModule", { value: true });
// Mock dependencies
jest.mock('../services/deepLinkService');
jest.mock('../utils/metrics');
const validateInvite_1 = require("../handlers/validateInvite");
const deepLinkService_1 = require("../services/deepLinkService");
describe('Validate Invite Handler', () => {
    const mockValidateInviteCode = deepLinkService_1.deepLinkService.validateInviteCode;
    beforeEach(() => {
        jest.clearAllMocks();
    });
    const createMockEvent = (body, method = 'POST') => ({
        httpMethod: method,
        body,
        headers: {},
        multiValueHeaders: {},
        isBase64Encoded: false,
        path: '/validate-invite',
        pathParameters: null,
        queryStringParameters: null,
        multiValueQueryStringParameters: null,
        stageVariables: null,
        requestContext: {},
        resource: '',
    });
    describe('CORS Handling', () => {
        it('should handle OPTIONS preflight requests', async () => {
            const event = createMockEvent('', 'OPTIONS');
            const result = await (0, validateInvite_1.handler)(event);
            expect(result.statusCode).toBe(200);
            expect(result.headers).toMatchObject({
                'Access-Control-Allow-Origin': '*',
                'Access-Control-Allow-Headers': 'Content-Type',
                'Access-Control-Allow-Methods': 'POST, OPTIONS',
            });
            expect(result.body).toBe('');
        });
        it('should include CORS headers in all responses', async () => {
            const event = createMockEvent(JSON.stringify({ inviteCode: 'ABC123' }));
            mockValidateInviteCode.mockResolvedValue(null);
            const result = await (0, validateInvite_1.handler)(event);
            expect(result.headers).toMatchObject({
                'Access-Control-Allow-Origin': '*',
                'Access-Control-Allow-Headers': 'Content-Type',
                'Access-Control-Allow-Methods': 'POST, OPTIONS',
                'Content-Type': 'application/json',
            });
        });
    });
    describe('Request Validation', () => {
        it('should return 400 for missing request body', async () => {
            const event = createMockEvent('');
            event.body = null;
            const result = await (0, validateInvite_1.handler)(event);
            expect(result.statusCode).toBe(400);
            const body = JSON.parse(result.body);
            expect(body.valid).toBe(false);
            expect(body.error).toBe('Request body is required');
        });
        it('should return 400 for missing invite code', async () => {
            const event = createMockEvent(JSON.stringify({}));
            const result = await (0, validateInvite_1.handler)(event);
            expect(result.statusCode).toBe(400);
            const body = JSON.parse(result.body);
            expect(body.valid).toBe(false);
            expect(body.error).toBe('Invite code is required');
        });
        it('should return 400 for invalid invite code format', async () => {
            const invalidCodes = ['ABC12', 'TOOLONG123', 'ABC-123'];
            for (const code of invalidCodes) {
                const event = createMockEvent(JSON.stringify({ inviteCode: code }));
                const result = await (0, validateInvite_1.handler)(event);
                expect(result.statusCode).toBe(400);
                const body = JSON.parse(result.body);
                expect(body.valid).toBe(false);
                expect(body.error).toBe('Invalid invite code format');
            }
            // Test empty string separately as it should be "required" error
            const emptyEvent = createMockEvent(JSON.stringify({ inviteCode: '' }));
            const emptyResult = await (0, validateInvite_1.handler)(emptyEvent);
            expect(emptyResult.statusCode).toBe(400);
            const emptyBody = JSON.parse(emptyResult.body);
            expect(emptyBody.valid).toBe(false);
            expect(emptyBody.error).toBe('Invite code is required');
        });
    });
    describe('Invite Code Validation', () => {
        it('should return valid response for existing invite code', async () => {
            const mockRoomInfo = {
                roomId: 'room-123',
                name: 'Test Room',
                hostId: 'user-456',
                status: 'ACTIVE',
                memberCount: 3,
                isPrivate: false,
                createdAt: '2026-01-10T12:00:00Z',
            };
            mockValidateInviteCode.mockResolvedValue(mockRoomInfo);
            const event = createMockEvent(JSON.stringify({ inviteCode: 'ABC123' }));
            const result = await (0, validateInvite_1.handler)(event);
            expect(result.statusCode).toBe(200);
            const body = JSON.parse(result.body);
            expect(body.valid).toBe(true);
            expect(body.room).toEqual(mockRoomInfo);
            expect(body.inviteCode).toBe('ABC123');
            expect(mockValidateInviteCode).toHaveBeenCalledWith('ABC123');
        });
        it('should return invalid response for non-existent invite code', async () => {
            mockValidateInviteCode.mockResolvedValue(null);
            const event = createMockEvent(JSON.stringify({ inviteCode: 'NOTFND' }));
            const result = await (0, validateInvite_1.handler)(event);
            expect(result.statusCode).toBe(200);
            const body = JSON.parse(result.body);
            expect(body.valid).toBe(false);
            expect(body.error).toBe('Invalid or expired invite code');
            expect(body.inviteCode).toBe('NOTFND');
        });
        it('should normalize invite code to uppercase', async () => {
            const mockRoomInfo = {
                roomId: 'room-123',
                name: 'Test Room',
                hostId: 'user-456',
                status: 'ACTIVE',
                memberCount: 1,
                isPrivate: false,
                createdAt: '2026-01-10T12:00:00Z',
            };
            mockValidateInviteCode.mockResolvedValue(mockRoomInfo);
            const event = createMockEvent(JSON.stringify({ inviteCode: 'abc123' }));
            const result = await (0, validateInvite_1.handler)(event);
            expect(result.statusCode).toBe(200);
            expect(mockValidateInviteCode).toHaveBeenCalledWith('ABC123');
            const body = JSON.parse(result.body);
            expect(body.inviteCode).toBe('ABC123');
        });
    });
    describe('Error Handling', () => {
        it('should handle service errors gracefully', async () => {
            mockValidateInviteCode.mockRejectedValue(new Error('Database connection failed'));
            const event = createMockEvent(JSON.stringify({ inviteCode: 'ABC123' }));
            const result = await (0, validateInvite_1.handler)(event);
            expect(result.statusCode).toBe(500);
            const body = JSON.parse(result.body);
            expect(body.valid).toBe(false);
            expect(body.error).toBe('Internal server error');
        });
        it('should handle malformed JSON in request body', async () => {
            const event = createMockEvent('invalid json');
            const result = await (0, validateInvite_1.handler)(event);
            expect(result.statusCode).toBe(500);
            const body = JSON.parse(result.body);
            expect(body.valid).toBe(false);
            expect(body.error).toBe('Internal server error');
        });
    });
    describe('Response Format', () => {
        it('should return consistent response structure for valid invites', async () => {
            const mockRoomInfo = {
                roomId: 'room-123',
                name: 'Movie Night',
                hostId: 'user-456',
                status: 'ACTIVE',
                memberCount: 5,
                isPrivate: true,
                createdAt: '2026-01-10T12:00:00Z',
            };
            mockValidateInviteCode.mockResolvedValue(mockRoomInfo);
            const event = createMockEvent(JSON.stringify({ inviteCode: 'XYZ789' }));
            const result = await (0, validateInvite_1.handler)(event);
            expect(result.statusCode).toBe(200);
            const body = JSON.parse(result.body);
            // Check response structure
            expect(body).toHaveProperty('valid', true);
            expect(body).toHaveProperty('room');
            expect(body).toHaveProperty('inviteCode', 'XYZ789');
            // Check room structure
            expect(body.room).toHaveProperty('roomId');
            expect(body.room).toHaveProperty('name');
            expect(body.room).toHaveProperty('hostId');
            expect(body.room).toHaveProperty('status');
            expect(body.room).toHaveProperty('memberCount');
            expect(body.room).toHaveProperty('isPrivate');
            expect(body.room).toHaveProperty('createdAt');
        });
        it('should return consistent response structure for invalid invites', async () => {
            mockValidateInviteCode.mockResolvedValue(null);
            const event = createMockEvent(JSON.stringify({ inviteCode: 'EXPIRE' }));
            const result = await (0, validateInvite_1.handler)(event);
            expect(result.statusCode).toBe(200);
            const body = JSON.parse(result.body);
            // Check response structure
            expect(body).toHaveProperty('valid', false);
            expect(body).toHaveProperty('error');
            expect(body).toHaveProperty('inviteCode', 'EXPIRE');
            expect(body).not.toHaveProperty('room');
        });
    });
    describe('Edge Cases', () => {
        it('should handle room with minimal information', async () => {
            const mockRoomInfo = {
                roomId: 'room-minimal',
                name: '',
                hostId: '',
                status: 'UNKNOWN',
                memberCount: 0,
                isPrivate: false,
                createdAt: '',
            };
            mockValidateInviteCode.mockResolvedValue(mockRoomInfo);
            const event = createMockEvent(JSON.stringify({ inviteCode: 'MIN123' }));
            const result = await (0, validateInvite_1.handler)(event);
            expect(result.statusCode).toBe(200);
            const body = JSON.parse(result.body);
            expect(body.valid).toBe(true);
            expect(body.room).toEqual(mockRoomInfo);
        });
        it('should handle very long room names', async () => {
            const longName = 'A'.repeat(1000);
            const mockRoomInfo = {
                roomId: 'room-long',
                name: longName,
                hostId: 'user-123',
                status: 'ACTIVE',
                memberCount: 1,
                isPrivate: false,
                createdAt: '2026-01-10T12:00:00Z',
            };
            mockValidateInviteCode.mockResolvedValue(mockRoomInfo);
            const event = createMockEvent(JSON.stringify({ inviteCode: 'LONG12' }));
            const result = await (0, validateInvite_1.handler)(event);
            expect(result.statusCode).toBe(200);
            const body = JSON.parse(result.body);
            expect(body.valid).toBe(true);
            expect(body.room.name).toBe(longName);
        });
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmFsaWRhdGUtaW52aXRlLWhhbmRsZXIudGVzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInZhbGlkYXRlLWludml0ZS1oYW5kbGVyLnRlc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOzs7OztHQUtHOztBQUVILG9CQUFvQjtBQUNwQixJQUFJLENBQUMsSUFBSSxDQUFDLDZCQUE2QixDQUFDLENBQUM7QUFDekMsSUFBSSxDQUFDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0FBRTlCLCtEQUFxRDtBQUNyRCxpRUFBOEQ7QUFHOUQsUUFBUSxDQUFDLHlCQUF5QixFQUFFLEdBQUcsRUFBRTtJQUN2QyxNQUFNLHNCQUFzQixHQUFHLGlDQUFlLENBQUMsa0JBQW9GLENBQUM7SUFFcEksVUFBVSxDQUFDLEdBQUcsRUFBRTtRQUNkLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztJQUN2QixDQUFDLENBQUMsQ0FBQztJQUVILE1BQU0sZUFBZSxHQUFHLENBQUMsSUFBWSxFQUFFLFNBQWlCLE1BQU0sRUFBd0IsRUFBRSxDQUFDLENBQUM7UUFDeEYsVUFBVSxFQUFFLE1BQU07UUFDbEIsSUFBSTtRQUNKLE9BQU8sRUFBRSxFQUFFO1FBQ1gsaUJBQWlCLEVBQUUsRUFBRTtRQUNyQixlQUFlLEVBQUUsS0FBSztRQUN0QixJQUFJLEVBQUUsa0JBQWtCO1FBQ3hCLGNBQWMsRUFBRSxJQUFJO1FBQ3BCLHFCQUFxQixFQUFFLElBQUk7UUFDM0IsK0JBQStCLEVBQUUsSUFBSTtRQUNyQyxjQUFjLEVBQUUsSUFBSTtRQUNwQixjQUFjLEVBQUUsRUFBUztRQUN6QixRQUFRLEVBQUUsRUFBRTtLQUNiLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxlQUFlLEVBQUUsR0FBRyxFQUFFO1FBQzdCLEVBQUUsQ0FBQywwQ0FBMEMsRUFBRSxLQUFLLElBQUksRUFBRTtZQUN4RCxNQUFNLEtBQUssR0FBRyxlQUFlLENBQUMsRUFBRSxFQUFFLFNBQVMsQ0FBQyxD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QixDQUFDLGlCQUFpQixDQUFDLFlBQVksQ0FBQyxDQUFDO1lBRXZELE1BQU0sS0FBSyxHQUFHLGVBQWUsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUN4RSxNQUFNLE1BQU0sR0FBRyxNQUFNLElBQUEsd0JBQU8sRUFBQyxLQUFLLENBQUMsQ0FBQztZQUVwQyxNQUFNLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUNwQyxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNyQyxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUM5QixNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDeEMsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIFVuaXQgVGVzdHMgZm9yIFZhbGlkYXRlIEludml0ZSBIYW5kbGVyXHJcbiAqIEZlYXR1cmU6IHRyaW5pdHktdm90aW5nLWZpeGVzXHJcbiAqIFxyXG4gKiBUZXN0cyB0aGUgd2ViIGxhbmRpbmcgcGFnZSBpbnZpdGUgdmFsaWRhdGlvbiBBUEkgZW5kcG9pbnRcclxuICovXHJcblxyXG4vLyBNb2NrIGRlcGVuZGVuY2llc1xyXG5qZXN0Lm1vY2soJy4uL3NlcnZpY2VzL2RlZXBMaW5rU2VydmljZScpO1xyXG5qZXN0Lm1vY2soJy4uL3V0aWxzL21ldHJpY3MnKTtcclxuXHJcbmltcG9ydCB7IGhhbmRsZXIgfSBmcm9tICcuLi9oYW5kbGVycy92YWxpZGF0ZUludml0ZSc7XHJcbmltcG9ydCB7IGRlZXBMaW5rU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL2RlZXBMaW5rU2VydmljZSc7XHJcbmltcG9ydCB7IEFQSUdhdGV3YXlQcm94eUV2ZW50IH0gZnJvbSAnYXdzLWxhbWJkYSc7XHJcblxyXG5kZXNjcmliZSgnVmFsaWRhdGUgSW52aXRlIEhhbmRsZXInLCAoKSA9PiB7XHJcbiAgY29uc3QgbW9ja1ZhbGlkYXRlSW52aXRlQ29kZSA9IGRlZXBMaW5rU2VydmljZS52YWxpZGF0ZUludml0ZUNvZGUgYXMgamVzdC5Nb2NrZWRGdW5jdGlvbjx0eXBlb2YgZGVlcExpbmtTZXJ2aWNlLnZhbGlkYXRlSW52aXRlQ29kZT47XHJcblxyXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XHJcbiAgfSk7XHJcblxyXG4gIGNvbnN0IGNyZWF0ZU1vY2tFdmVudCA9IChib2R5OiBzdHJpbmcsIG1ldGhvZDogc3RyaW5nID0gJ1BPU1QnKTogQVBJR2F0ZXdheVByb3h5RXZlbnQgPT4gKHtcclxuICAgIGh0dHBNZXRob2Q6IG1ldGhvZCxcclxuICAgIGJvZHksXHJcbiAgICBoZWFkZXJzOiB7fSxcclxuICAgIG11bHRpVmFsdWVIZWFkZXJzOiB7fSxcclxuICAgIGlzQmFzZTY0RW5jb2RlZDogZmFsc2UsXHJcbiAgICBwYXRoOiAnL3ZhbGlkYXRlLWludml0ZScsXHJcbiAgICBwYXRoUGFyYW1ldGVyczogbnVsbCxcclxuICAgIHF1ZXJ5U3RyaW5nUGFyYW1ldGVyczogbnVsbCxcclxuICAgIG11bHRpVmFsdWVRdWVyeVN0cmluZ1BhcmFtZXRlcnM6IG51bGwsXHJcbiAgICBzdGFnZVZhcmlhYmxlczogbnVsbCxcclxuICAgIHJlcXVlc3RDb250ZXh0OiB7fSBhcyBhbnksXHJcbiAgICByZXNvdXJjZTogJycsXHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdDT1JTIEhhbmRsaW5nJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgT1BUSU9OUyBwcmVmbGlnaHQgcmVxdWVzdHMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGV2ZW50ID0gY3JlYXRlTW9ja0V2ZW50KCcnLCAnT1BUSU9OUycpO1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBoYW5kbGVyKGV2ZW50KTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3RhdHVzQ29kZSkudG9CZSgyMDApO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmhlYWRlcnMpLnRvTWF0Y2hPYmplY3Qoe1xyXG4gICAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nOiAnKicsXHJcbiAgICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnMnOiAnQ29udGVudC1UeXBlJyxcclxuICAgICAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcyc6ICdQT1NULCBPUFRJT05TJyxcclxuICAgICAgfSk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuYm9keSkudG9CZSgnJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGluY2x1ZGUgQ09SUyBoZWFkZXJzIGluIGFsbCByZXNwb25zZXMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGV2ZW50ID0gY3JlYXRlTW9ja0V2ZW50KEpTT04uc3RyaW5naWZ5KHsgaW52aXRlQ29kZTogJ0FCQzEyMycgfSkpO1xyXG4gICAgICBtb2NrVmFsaWRhdGVJbnZpdGVDb2RlLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaGFuZGxlcihldmVudCk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0LmhlYWRlcnMpLnRvTWF0Y2hPYmplY3Qoe1xyXG4gICAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nOiAnKicsXHJcbiAgICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnMnOiAnQ29udGVudC1UeXBlJyxcclxuICAgICAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcyc6ICdQT1NULCBPUFRJT05TJyxcclxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnUmVxdWVzdCBWYWxpZGF0aW9uJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gNDAwIGZvciBtaXNzaW5nIHJlcXVlc3QgYm9keScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgZXZlbnQgPSBjcmVhdGVNb2NrRXZlbnQoJycpO1xyXG4gICAgICBldmVudC5ib2R5ID0gbnVsbDtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGhhbmRsZXIoZXZlbnQpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdGF0dXNDb2RlKS50b0JlKDQwMCk7XHJcbiAgICAgIGNvbnN0IGJvZHkgPSBKU09OLnBhcnNlKHJlc3VsdC5ib2R5KTtcclxuICAgICAgZXhwZWN0KGJvZHkudmFsaWQpLnRvQmUoZmFsc2UpO1xyXG4gICAgICBleHBlY3QoYm9keS5lcnJvcikudG9CZSgnUmVxdWVzdCBib2R5IGlzIHJlcXVpcmVkJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJldHVybiA0MDAgZm9yIG1pc3NpbmcgaW52aXRlIGNvZGUnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGV2ZW50ID0gY3JlYXRlTW9ja0V2ZW50KEpTT04uc3RyaW5naWZ5KHt9KSk7XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBoYW5kbGVyKGV2ZW50KTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3RhdHVzQ29kZSkudG9CZSg0MDApO1xyXG4gICAgICBjb25zdCBib2R5ID0gSlNPTi5wYXJzZShyZXN1bHQuYm9keSk7XHJcbiAgICAgIGV4cGVjdChib2R5LnZhbGlkKS50b0JlKGZhbHNlKTtcclxuICAgICAgZXhwZWN0KGJvZHkuZXJyb3IpLnRvQmUoJ0ludml0ZSBjb2RlIGlzIHJlcXVpcmVkJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJldHVybiA0MDAgZm9yIGludmFsaWQgaW52aXRlIGNvZGUgZm9ybWF0JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBpbnZhbGlkQ29kZXMgPSBbJ0FCQzEyJywgJ1RPT0xPTkcxMjMnLCAnQUJDLTEyMyddO1xyXG5cclxuICAgICAgZm9yIChjb25zdCBjb2RlIG9mIGludmFsaWRDb2Rlcykge1xyXG4gICAgICAgIGNvbnN0IGV2ZW50ID0gY3JlYXRlTW9ja0V2ZW50KEpTT04uc3RyaW5naWZ5KHsgaW52aXRlQ29kZTogY29kZSB9KSk7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaGFuZGxlcihldmVudCk7XHJcblxyXG4gICAgICAgIGV4cGVjdChyZXN1bHQuc3RhdHVzQ29kZSkudG9CZSg0MDApO1xyXG4gICAgICAgIGNvbnN0IGJvZHkgPSBKU09OLnBhcnNlKHJlc3VsdC5ib2R5KTtcclxuICAgICAgICBleHBlY3QoYm9keS52YWxpZCkudG9CZShmYWxzZSk7XHJcbiAgICAgICAgZXhwZWN0KGJvZHkuZXJyb3IpLnRvQmUoJ0ludmFsaWQgaW52aXRlIGNvZGUgZm9ybWF0Jyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFRlc3QgZW1wdHkgc3RyaW5nIHNlcGFyYXRlbHkgYXMgaXQgc2hvdWxkIGJlIFwicmVxdWlyZWRcIiBlcnJvclxyXG4gICAgICBjb25zdCBlbXB0eUV2ZW50ID0gY3JlYXRlTW9ja0V2ZW50KEpTT04uc3RyaW5naWZ5KHsgaW52aXRlQ29kZTogJycgfSkpO1xyXG4gICAgICBjb25zdCBlbXB0eVJlc3VsdCA9IGF3YWl0IGhhbmRsZXIoZW1wdHlFdmVudCk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QoZW1wdHlSZXN1bHQuc3RhdHVzQ29kZSkudG9CZSg0MDApO1xyXG4gICAgICBjb25zdCBlbXB0eUJvZHkgPSBKU09OLnBhcnNlKGVtcHR5UmVzdWx0LmJvZHkpO1xyXG4gICAgICBleHBlY3QoZW1wdHlCb2R5LnZhbGlkKS50b0JlKGZhbHNlKTtcclxuICAgICAgZXhwZWN0KGVtcHR5Qm9keS5lcnJvcikudG9CZSgnSW52aXRlIGNvZGUgaXMgcmVxdWlyZWQnKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnSW52aXRlIENvZGUgVmFsaWRhdGlvbicsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgcmV0dXJuIHZhbGlkIHJlc3BvbnNlIGZvciBleGlzdGluZyBpbnZpdGUgY29kZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgbW9ja1Jvb21JbmZvID0ge1xyXG4gICAgICAgIHJvb21JZDogJ3Jvb20tMTIzJyxcclxuICAgICAgICBuYW1lOiAnVGVzdCBSb29tJyxcclxuICAgICAgICBob3N0SWQ6ICd1c2VyLTQ1NicsXHJcbiAgICAgICAgc3RhdHVzOiAnQUNUSVZFJyxcclxuICAgICAgICBtZW1iZXJDb3VudDogMyxcclxuICAgICAgICBpc1ByaXZhdGU6IGZhbHNlLFxyXG4gICAgICAgIGNyZWF0ZWRBdDogJzIwMjYtMDEtMTBUMTI6MDA6MDBaJyxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIG1vY2tWYWxpZGF0ZUludml0ZUNvZGUubW9ja1Jlc29sdmVkVmFsdWUobW9ja1Jvb21JbmZvKTtcclxuXHJcbiAgICAgIGNvbnN0IGV2ZW50ID0gY3JlYXRlTW9ja0V2ZW50KEpTT04uc3RyaW5naWZ5KHsgaW52aXRlQ29kZTogJ0FCQzEyMycgfSkpO1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBoYW5kbGVyKGV2ZW50KTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3RhdHVzQ29kZSkudG9CZSgyMDApO1xyXG4gICAgICBjb25zdCBib2R5ID0gSlNPTi5wYXJzZShyZXN1bHQuYm9keSk7XHJcbiAgICAgIGV4cGVjdChib2R5LnZhbGlkKS50b0JlKHRydWUpO1xyXG4gICAgICBleHBlY3QoYm9keS5yb29tKS50b0VxdWFsKG1vY2tSb29tSW5mbyk7XHJcbiAgICAgIGV4cGVjdChib2R5Lmludml0ZUNvZGUpLnRvQmUoJ0FCQzEyMycpO1xyXG4gICAgICBleHBlY3QobW9ja1ZhbGlkYXRlSW52aXRlQ29kZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ0FCQzEyMycpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gaW52YWxpZCByZXNwb25zZSBmb3Igbm9uLWV4aXN0ZW50IGludml0ZSBjb2RlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBtb2NrVmFsaWRhdGVJbnZpdGVDb2RlLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xyXG5cclxuICAgICAgY29uc3QgZXZlbnQgPSBjcmVhdGVNb2NrRXZlbnQoSlNPTi5zdHJpbmdpZnkoeyBpbnZpdGVDb2RlOiAnTk9URk5EJyB9KSk7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGhhbmRsZXIoZXZlbnQpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdGF0dXNDb2RlKS50b0JlKDIwMCk7XHJcbiAgICAgIGNvbnN0IGJvZHkgPSBKU09OLnBhcnNlKHJlc3VsdC5ib2R5KTtcclxuICAgICAgZXhwZWN0KGJvZHkudmFsaWQpLnRvQmUoZmFsc2UpO1xyXG4gICAgICBleHBlY3QoYm9keS5lcnJvcikudG9CZSgnSW52YWxpZCBvciBleHBpcmVkIGludml0ZSBjb2RlJyk7XHJcbiAgICAgIGV4cGVjdChib2R5Lmludml0ZUNvZGUpLnRvQmUoJ05PVEZORCcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBub3JtYWxpemUgaW52aXRlIGNvZGUgdG8gdXBwZXJjYXNlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBtb2NrUm9vbUluZm8gPSB7XHJcbiAgICAgICAgcm9vbUlkOiAncm9vbS0xMjMnLFxyXG4gICAgICAgIG5hbWU6ICdUZXN0IFJvb20nLFxyXG4gICAgICAgIGhvc3RJZDogJ3VzZXItNDU2JyxcclxuICAgICAgICBzdGF0dXM6ICdBQ1RJVkUnLFxyXG4gICAgICAgIG1lbWJlckNvdW50OiAxLFxyXG4gICAgICAgIGlzUHJpdmF0ZTogZmFsc2UsXHJcbiAgICAgICAgY3JlYXRlZEF0OiAnMjAyNi0wMS0xMFQxMjowMDowMFonLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgbW9ja1ZhbGlkYXRlSW52aXRlQ29kZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrUm9vbUluZm8pO1xyXG5cclxuICAgICAgY29uc3QgZXZlbnQgPSBjcmVhdGVNb2NrRXZlbnQoSlNPTi5zdHJpbmdpZnkoeyBpbnZpdGVDb2RlOiAnYWJjMTIzJyB9KSk7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGhhbmRsZXIoZXZlbnQpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdGF0dXNDb2RlKS50b0JlKDIwMCk7XHJcbiAgICAgIGV4cGVjdChtb2NrVmFsaWRhdGVJbnZpdGVDb2RlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnQUJDMTIzJyk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBib2R5ID0gSlNPTi5wYXJzZShyZXN1bHQuYm9keSk7XHJcbiAgICAgIGV4cGVjdChib2R5Lmludml0ZUNvZGUpLnRvQmUoJ0FCQzEyMycpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdFcnJvciBIYW5kbGluZycsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHNlcnZpY2UgZXJyb3JzIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIG1vY2tWYWxpZGF0ZUludml0ZUNvZGUubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCdEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZCcpKTtcclxuXHJcbiAgICAgIGNvbnN0IGV2ZW50ID0gY3JlYXRlTW9ja0V2ZW50KEpTT04uc3RyaW5naWZ5KHsgaW52aXRlQ29kZTogJ0FCQzEyMycgfSkpO1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBoYW5kbGVyKGV2ZW50KTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3RhdHVzQ29kZSkudG9CZSg1MDApO1xyXG4gICAgICBjb25zdCBib2R5ID0gSlNPTi5wYXJzZShyZXN1bHQuYm9keSk7XHJcbiAgICAgIGV4cGVjdChib2R5LnZhbGlkKS50b0JlKGZhbHNlKTtcclxuICAgICAgZXhwZWN0KGJvZHkuZXJyb3IpLnRvQmUoJ0ludGVybmFsIHNlcnZlciBlcnJvcicpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbWFsZm9ybWVkIEpTT04gaW4gcmVxdWVzdCBib2R5JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBldmVudCA9IGNyZWF0ZU1vY2tFdmVudCgnaW52YWxpZCBqc29uJyk7XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBoYW5kbGVyKGV2ZW50KTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3RhdHVzQ29kZSkudG9CZSg1MDApO1xyXG4gICAgICBjb25zdCBib2R5ID0gSlNPTi5wYXJzZShyZXN1bHQuYm9keSk7XHJcbiAgICAgIGV4cGVjdChib2R5LnZhbGlkKS50b0JlKGZhbHNlKTtcclxuICAgICAgZXhwZWN0KGJvZHkuZXJyb3IpLnRvQmUoJ0ludGVybmFsIHNlcnZlciBlcnJvcicpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdSZXNwb25zZSBGb3JtYXQnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIHJldHVybiBjb25zaXN0ZW50IHJlc3BvbnNlIHN0cnVjdHVyZSBmb3IgdmFsaWQgaW52aXRlcycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgbW9ja1Jvb21JbmZvID0ge1xyXG4gICAgICAgIHJvb21JZDogJ3Jvb20tMTIzJyxcclxuICAgICAgICBuYW1lOiAnTW92aWUgTmlnaHQnLFxyXG4gICAgICAgIGhvc3RJZDogJ3VzZXItNDU2JyxcclxuICAgICAgICBzdGF0dXM6ICdBQ1RJVkUnLFxyXG4gICAgICAgIG1lbWJlckNvdW50OiA1LFxyXG4gICAgICAgIGlzUHJpdmF0ZTogdHJ1ZSxcclxuICAgICAgICBjcmVhdGVkQXQ6ICcyMDI2LTAxLTEwVDEyOjAwOjAwWicsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBtb2NrVmFsaWRhdGVJbnZpdGVDb2RlLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tSb29tSW5mbyk7XHJcblxyXG4gICAgICBjb25zdCBldmVudCA9IGNyZWF0ZU1vY2tFdmVudChKU09OLnN0cmluZ2lmeSh7IGludml0ZUNvZGU6ICdYWVo3ODknIH0pKTtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaGFuZGxlcihldmVudCk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0LnN0YXR1c0NvZGUpLnRvQmUoMjAwKTtcclxuICAgICAgY29uc3QgYm9keSA9IEpTT04ucGFyc2UocmVzdWx0LmJvZHkpO1xyXG4gICAgICBcclxuICAgICAgLy8gQ2hlY2sgcmVzcG9uc2Ugc3RydWN0dXJlXHJcbiAgICAgIGV4cGVjdChib2R5KS50b0hhdmVQcm9wZXJ0eSgndmFsaWQnLCB0cnVlKTtcclxuICAgICAgZXhwZWN0KGJvZHkpLnRvSGF2ZVByb3BlcnR5KCdyb29tJyk7XHJcbiAgICAgIGV4cGVjdChib2R5KS50b0hhdmVQcm9wZXJ0eSgnaW52aXRlQ29kZScsICdYWVo3ODknKTtcclxuICAgICAgXHJcbiAgICAgIC8vIENoZWNrIHJvb20gc3RydWN0dXJlXHJcbiAgICAgIGV4cGVjdChib2R5LnJvb20pLnRvSGF2ZVByb3BlcnR5KCdyb29tSWQnKTtcclxuICAgICAgZXhwZWN0KGJvZHkucm9vbSkudG9IYXZlUHJvcGVydHkoJ25hbWUnKTtcclxuICAgICAgZXhwZWN0KGJvZHkucm9vbSkudG9IYXZlUHJvcGVydHkoJ2hvc3RJZCcpO1xyXG4gICAgICBleHBlY3QoYm9keS5yb29tKS50b0hhdmVQcm9wZXJ0eSgnc3RhdHVzJyk7XHJcbiAgICAgIGV4cGVjdChib2R5LnJvb20pLnRvSGF2ZVByb3BlcnR5KCdtZW1iZXJDb3VudCcpO1xyXG4gICAgICBleHBlY3QoYm9keS5yb29tKS50b0hhdmVQcm9wZXJ0eSgnaXNQcml2YXRlJyk7XHJcbiAgICAgIGV4cGVjdChib2R5LnJvb20pLnRvSGF2ZVByb3BlcnR5KCdjcmVhdGVkQXQnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGNvbnNpc3RlbnQgcmVzcG9uc2Ugc3RydWN0dXJlIGZvciBpbnZhbGlkIGludml0ZXMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIG1vY2tWYWxpZGF0ZUludml0ZUNvZGUubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XHJcblxyXG4gICAgICBjb25zdCBldmVudCA9IGNyZWF0ZU1vY2tFdmVudChKU09OLnN0cmluZ2lmeSh7IGludml0ZUNvZGU6ICdFWFBJUkUnIH0pKTtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaGFuZGxlcihldmVudCk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0LnN0YXR1c0NvZGUpLnRvQmUoMjAwKTtcclxuICAgICAgY29uc3QgYm9keSA9IEpTT04ucGFyc2UocmVzdWx0LmJvZHkpO1xyXG4gICAgICBcclxuICAgICAgLy8gQ2hlY2sgcmVzcG9uc2Ugc3RydWN0dXJlXHJcbiAgICAgIGV4cGVjdChib2R5KS50b0hhdmVQcm9wZXJ0eSgndmFsaWQnLCBmYWxzZSk7XHJcbiAgICAgIGV4cGVjdChib2R5KS50b0hhdmVQcm9wZXJ0eSgnZXJyb3InKTtcclxuICAgICAgZXhwZWN0KGJvZHkpLnRvSGF2ZVByb3BlcnR5KCdpbnZpdGVDb2RlJywgJ0VYUElSRScpO1xyXG4gICAgICBleHBlY3QoYm9keSkubm90LnRvSGF2ZVByb3BlcnR5KCdyb29tJyk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ0VkZ2UgQ2FzZXMnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSByb29tIHdpdGggbWluaW1hbCBpbmZvcm1hdGlvbicsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgbW9ja1Jvb21JbmZvID0ge1xyXG4gICAgICAgIHJvb21JZDogJ3Jvb20tbWluaW1hbCcsXHJcbiAgICAgICAgbmFtZTogJycsXHJcbiAgICAgICAgaG9zdElkOiAnJyxcclxuICAgICAgICBzdGF0dXM6ICdVTktOT1dOJyxcclxuICAgICAgICBtZW1iZXJDb3VudDogMCxcclxuICAgICAgICBpc1ByaXZhdGU6IGZhbHNlLFxyXG4gICAgICAgIGNyZWF0ZWRBdDogJycsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBtb2NrVmFsaWRhdGVJbnZpdGVDb2RlLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tSb29tSW5mbyk7XHJcblxyXG4gICAgICBjb25zdCBldmVudCA9IGNyZWF0ZU1vY2tFdmVudChKU09OLnN0cmluZ2lmeSh7IGludml0ZUNvZGU6ICdNSU4xMjMnIH0pKTtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaGFuZGxlcihldmVudCk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0LnN0YXR1c0NvZGUpLnRvQmUoMjAwKTtcclxuICAgICAgY29uc3QgYm9keSA9IEpTT04ucGFyc2UocmVzdWx0LmJvZHkpO1xyXG4gICAgICBleHBlY3QoYm9keS52YWxpZCkudG9CZSh0cnVlKTtcclxuICAgICAgZXhwZWN0KGJvZHkucm9vbSkudG9FcXVhbChtb2NrUm9vbUluZm8pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgdmVyeSBsb25nIHJvb20gbmFtZXMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGxvbmdOYW1lID0gJ0EnLnJlcGVhdCgxMDAwKTtcclxuICAgICAgY29uc3QgbW9ja1Jvb21JbmZvID0ge1xyXG4gICAgICAgIHJvb21JZDogJ3Jvb20tbG9uZycsXHJcbiAgICAgICAgbmFtZTogbG9uZ05hbWUsXHJcbiAgICAgICAgaG9zdElkOiAndXNlci0xMjMnLFxyXG4gICAgICAgIHN0YXR1czogJ0FDVElWRScsXHJcbiAgICAgICAgbWVtYmVyQ291bnQ6IDEsXHJcbiAgICAgICAgaXNQcml2YXRlOiBmYWxzZSxcclxuICAgICAgICBjcmVhdGVkQXQ6ICcyMDI2LTAxLTEwVDEyOjAwOjAwWicsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBtb2NrVmFsaWRhdGVJbnZpdGVDb2RlLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tSb29tSW5mbyk7XHJcblxyXG4gICAgICBjb25zdCBldmVudCA9IGNyZWF0ZU1vY2tFdmVudChKU09OLnN0cmluZ2lmeSh7IGludml0ZUNvZGU6ICdMT05HMTInIH0pKTtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaGFuZGxlcihldmVudCk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0LnN0YXR1c0NvZGUpLnRvQmUoMjAwKTtcclxuICAgICAgY29uc3QgYm9keSA9IEpTT04ucGFyc2UocmVzdWx0LmJvZHkpO1xyXG4gICAgICBleHBlY3QoYm9keS52YWxpZCkudG9CZSh0cnVlKTtcclxuICAgICAgZXhwZWN0KGJvZHkucm9vbS5uYW1lKS50b0JlKGxvbmdOYW1lKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59KTsiXX0=