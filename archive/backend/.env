# ========================================
# TRINITY BACKEND - CONFIGURACIÓN DE ENTORNO
# ========================================
# IMPORTANTE: Este archivo contiene credenciales sensibles.
# NO subir a repositorios públicos. Añadir a .gitignore.

# ========================================
# APPLICATION CONFIGURATION
# ========================================
NODE_ENV=development
PORT=3002
STAGE=dev
API_VERSION=v1

# ========================================
# AWS CONFIGURATION
# ========================================
AWS_REGION=eu-west-1
AWS_ACCESS_KEY_ID=AKIA4KZ6MNNXEPEVX44C
AWS_SECRET_ACCESS_KEY=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
AWS_ACCOUNT_ID=847850007406

# ========================================
# AWS APPSYNC GRAPHQL CONFIGURATION
# ========================================
APPSYNC_API_URL=https://imx6fos5lnd3xkdchl4rqtv4pi.appsync-api.eu-west-1.amazonaws.com/graphql
APPSYNC_API_ID=epjtt2y3fzh53ii6omzj6n6h5a
APPSYNC_REALTIME_URL=wss://imx6fos5lnd3xkdchl4rqtv4pi.appsync-realtime-api.eu-west-1.amazonaws.com/graphql
APPSYNC_REGION=eu-west-1

# ========================================
# AWS COGNITO AUTHENTICATION
# ========================================
COGNITO_USER_POOL_ID=eu-west-1_6UxioIj4z
COGNITO_CLIENT_ID=59dpqsm580j14ulkcha19shl64
COGNITO_REGION=eu-west-1
COGNITO_USER_POOL_DOMAIN=trinity-auth-dev.auth.eu-west-1.amazoncognito.com

# AWS Cognito Identity Pool Configuration (for Google Federation)
COGNITO_IDENTITY_POOL_ID=eu-west-1:YOUR_IDENTITY_POOL_ID_HERE
COGNITO_IDENTITY_POOL_REGION=eu-west-1
COGNITO_FEDERATED_IDENTITY_ENABLED=true

# ========================================
# GOOGLE OAUTH CONFIGURATION
# ========================================
# Google OAuth Client Configuration
GOOGLE_WEB_CLIENT_ID=230498169556-cqb6dv3o58oeblrfrk49o0a6l7ecjtrn.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=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

# Google OAuth Client IDs for different platforms
GOOGLE_IOS_CLIENT_ID=230498169556-ios-specific-client-id.apps.googleusercontent.com
GOOGLE_ANDROID_CLIENT_ID=230498169556-ipt2iafpd75h17kjcsgmb89oc9u1ciii.apps.googleusercontent.com

# Google OAuth Redirect URIs
GOOGLE_REDIRECT_URI_WEB=http://localhost:3002/auth/google/callback
GOOGLE_REDIRECT_URI_COGNITO=https://trinity-auth-dev.auth.eu-west-1.amazoncognito.com/oauth2/idpresponse
GOOGLE_REDIRECT_URI_MOBILE=trinity://auth/callback

# Google Provider Configuration for Cognito
COGNITO_GOOGLE_PROVIDER_NAME=Google
GOOGLE_PROVIDER_ATTRIBUTE_MAPPING=email_verified=email_verified,email=email,name=name,picture=picture

# ========================================
# DYNAMODB CONFIGURATION
# ========================================
# DynamoDB Table Names (from CDK deployment)
USERS_TABLE=trinity-users-dev
ROOMS_TABLE=trinity-rooms-dev
ROOM_MEMBERS_TABLE=trinity-room-members-dev
VOTES_TABLE=trinity-votes-dev
MOVIES_CACHE_TABLE=trinity-movies-cache-dev

# DynamoDB Configuration
DYNAMODB_REGION=eu-west-1
DYNAMODB_BILLING_MODE=PAY_PER_REQUEST
DYNAMODB_POINT_IN_TIME_RECOVERY=true

# ========================================
# LAMBDA FUNCTIONS CONFIGURATION
# ========================================
AUTH_HANDLER_NAME=trinity-auth-dev
ROOM_HANDLER_NAME=trinity-room-dev
VOTE_HANDLER_NAME=trinity-vote-dev
MOVIE_HANDLER_NAME=trinity-movie-dev
AI_HANDLER_NAME=trinity-ai-dev
REALTIME_HANDLER_NAME=trinity-realtime-dev

# Lambda Configuration
LAMBDA_MEMORY_SIZE=512
LAMBDA_TIMEOUT_SECONDS=30
LAMBDA_RUNTIME=nodejs18.x

# ========================================
# EXTERNAL API CONFIGURATION
# ========================================
# TMDB API Configuration
TMDB_API_KEY=dc4dbcd2404c1ca852f8eb964add267d
TMDB_BASE_URL=https://api.themoviedb.org/3
TMDB_IMAGE_BASE_URL=https://image.tmdb.org/t/p/
TMDB_RATE_LIMIT_PER_SECOND=40

# Hugging Face API Configuration
HF_API_TOKEN=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
HF_MODEL_ENDPOINT=https://api-inference.huggingface.co/models/BSC-LT/salamandra-7b-instruct
HF_RATE_LIMIT_PER_MINUTE=1000

# ========================================
# SECURITY CONFIGURATION
# ========================================
# JWT Configuration
JWT_SECRET=trinity-mvp-super-secure-jwt-secret-key-2025-development
JWT_EXPIRES_IN=24h
JWT_REFRESH_EXPIRES_IN=7d

# CORS Configuration
CORS_ORIGIN=http://localhost:3000,http://localhost:19006,trinity://
CORS_CREDENTIALS=true

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# ========================================
# CIRCUIT BREAKER CONFIGURATION
# ========================================
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
CIRCUIT_BREAKER_TIMEOUT_MS=60000
CIRCUIT_BREAKER_RESET_TIMEOUT_MS=30000
CIRCUIT_BREAKER_ENABLED=true

# ========================================
# PERFORMANCE OPTIMIZATION
# ========================================
# Media Cache Configuration
MEDIA_CACHE_ENABLED=true
MEDIA_PREFETCH_ENABLED=true
MEDIA_PREFETCH_BATCH_SIZE=15
MEDIA_PREFETCH_LOOKAHEAD=10
MEDIA_CACHE_TTL_SECONDS=3600

# Auto Refresh Configuration
AUTO_REFRESH_ENABLED=true
AUTO_REFRESH_THRESHOLD=0.9
AUTO_REFRESH_INTERVAL_MS=30000

# Connection Pool Configuration
DB_CONNECTION_POOL_MIN=2
DB_CONNECTION_POOL_MAX=10
DB_CONNECTION_TIMEOUT_MS=30000

# ========================================
# BUSINESS LOGIC CONFIGURATION
# ========================================
# Room Configuration
MAX_ROOM_MEMBERS=10
MAX_MASTER_LIST_SIZE=50
INACTIVE_MEMBER_TIMEOUT_MINUTES=30
ROOM_EXPIRY_HOURS=24

# Voting Configuration
VOTE_TIMEOUT_SECONDS=300
MAX_VOTES_PER_USER_PER_ROOM=1
VOTING_ALGORITHM=stop_on_match

# AI Recommendations Configuration
AI_MAX_RECOMMENDATIONS=10
AI_RECOMMENDATION_TIMEOUT_MS=15000
AI_FALLBACK_ENABLED=true

# ========================================
# MONITORING & LOGGING
# ========================================
LOG_LEVEL=debug
ENABLE_METRICS=true
ENABLE_XRAY_TRACING=true
ENABLE_CLOUDWATCH_LOGS=true

# CloudWatch Configuration
CLOUDWATCH_LOG_GROUP=/aws/lambda/trinity-backend
CLOUDWATCH_LOG_RETENTION_DAYS=14

# Metrics Configuration
METRICS_NAMESPACE=Trinity/Backend
CUSTOM_METRICS_ENABLED=true

# ========================================
# COST OPTIMIZATION
# ========================================
MONTHLY_BUDGET_LIMIT=50
ALERT_EMAIL=admin@trinity.com
COST_MONITORING_ENABLED=true
AUTO_SCALING_ENABLED=true

# Resource Optimization
LAMBDA_PROVISIONED_CONCURRENCY=0
DYNAMODB_AUTO_SCALING_ENABLED=false

# ========================================
# FEATURE FLAGS
# ========================================
ENABLE_REAL_TIME_NOTIFICATIONS=true
ENABLE_AI_RECOMMENDATIONS=true
ENABLE_GOOGLE_SIGNIN=true
ENABLE_CIRCUIT_BREAKER=true
ENABLE_METRICS_LOGGING=true
ENABLE_CACHING=true
ENABLE_PREFETCHING=true

# ========================================
# DEVELOPMENT & DEBUGGING
# ========================================
DEBUG_MODE=true
VERBOSE_LOGGING=true
ENABLE_API_DOCS=true
ENABLE_HEALTH_CHECKS=true

# Development URLs
FRONTEND_URL=http://localhost:3000
MOBILE_DEV_URL=http://localhost:19006

# ========================================
# CDN & CLOUDFRONT CONFIGURATION
# ========================================
CLOUDFRONT_DISTRIBUTION_ID=your-cloudfront-distribution-id
CLOUDFRONT_DOMAIN=test-cloudfront-domain.cloudfront.net
CDN_BASE_URL=https://image.tmdb.org/t/p/
CDN_CACHE_TTL=86400
IMAGE_OPTIMIZATION_ENABLED=true

# ========================================
# BACKUP & RECOVERY
# ========================================
ENABLE_POINT_IN_TIME_RECOVERY=true
BACKUP_RETENTION_DAYS=7
AUTOMATED_BACKUPS_ENABLED=true